serviceMaps:
  serviceName: csp
  mappings:
  - version: 1.0
    description: Persists Properties details in cs_pt_property_v1 table
    fromTopic: save-property-create
    isTransaction: true
    queryMaps:

    - query: INSERT INTO cs_pt_property_v1 (id, transit_number, tenantid, colony, master_data_state, master_data_action, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber
      
      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.masterDataState

      - jsonPath: $.Properties.*.masterDataAction 
      
      - jsonPath: $.Properties.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_propertydetails_v1 (id, property_id, transit_number, tenantid, area, rent_per_sqyd, current_owner, floors, additional_details, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*.propertyDetails
      jsonMaps:

      - jsonPath: $.Properties.*.propertyDetails.id

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber
      
      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.area

      - jsonPath: $.Properties.*.propertyDetails.rentPerSqyd

      - jsonPath: $.Properties.*.propertyDetails.currentOwner

      - jsonPath: $.Properties.*.propertyDetails.floors

      - jsonPath: $.Properties.*.propertyDetails.additionalDetails

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.createdBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.createdTime

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_ownership_v1 (id, property_id, tenantid, allotmen_number, active_state, is_primary_owner, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.owners.*
      jsonMaps:

      - jsonPath: $.Properties.*.owners.*.id

      - jsonPath: $.Properties.*.owners.*.property.id

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.owners.*.allotmenNumber

      - jsonPath: $.Properties.*.owners.*.activeState

      - jsonPath: $.Properties.*.owners.*.isPrimaryOwner

      - jsonPath: $.Properties.*.owners.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedTime
  
    - query: INSERT INTO cs_pt_ownershipdetails_v1 (id, property_id, owner_id, tenantid, name, email, phone, gender, date_of_birth, aadhaar_number, allotment_startdate, allotment_enddate, posession_startdate, posession_enddate, monthly_rent, revision_period, revision_percentage, father_or_husband, relation, relation_with_deceased_allottee, date_of_death_allottee, application_number, application_type, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.owners.*.ownerDetails
      jsonMaps:

      - jsonPath: $.Properties.*.owners.*.ownerDetails.id

      - jsonPath: $.Properties.*.owners.*.property.id

      - jsonPath: $.Properties.*.owners.*.id
      
      - jsonPath: $.Properties.*.tenantId
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.name

      - jsonPath: $.Properties.*.owners.*.ownerDetails.email

      - jsonPath: $.Properties.*.owners.*.ownerDetails.phone
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.gender

      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Properties.*.owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Properties.*.owners.*.ownerDetails.relation

      - jsonPath: $.Properties.*.owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfDeathAllottee

      - jsonPath: $.Properties.*.owners.*.ownerDetails.applicationNumber
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.applicationType

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.createdBy

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.createdTime

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_address_v1 (id, property_id, transit_number, tenantid, colony, area, district, state, country, pincode, landmark, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.propertyDetails.address.id

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.propertyDetails.address.area

      - jsonPath: $.Properties.*.propertyDetails.address.district

      - jsonPath: $.Properties.*.propertyDetails.address.state
      
      - jsonPath: $.Properties.*.propertyDetails.address.country

      - jsonPath: $.Properties.*.propertyDetails.address.pincode

      - jsonPath: $.Properties.*.propertyDetails.address.landmark

      - jsonPath: $.Properties.*.propertyDetails.address.auditDetails.createdBy

      - jsonPath: $.Properties.*.propertyDetails.address.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.address.auditDetails.createdTime

      - jsonPath: $.Properties.*.propertyDetails.address.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_documents_v1 (id, reference_id, tenantid, is_active, document_type, fileStore_id, property_id, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.propertyDetails.applicationDocuments.*
      jsonMaps:

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.id

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.referenceId

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.active

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.documentType

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.fileStoreId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.propertyId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedTime      


    - query: INSERT INTO cs_pt_property_audit_v1 (id, transit_number, tenantid, colony, master_data_state, master_data_action, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.masterDataState

      - jsonPath: $.Properties.*.masterDataAction 

      - jsonPath: $.Properties.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_propertydetails_audit_v1 (id, property_id, transit_number, tenantid, area, rent_per_sqyd, current_owner, floors, additional_details, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*.propertyDetails
      jsonMaps:

      - jsonPath: $.Properties.*.propertyDetails.id

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.area

      - jsonPath: $.Properties.*.propertyDetails.rentPerSqyd

      - jsonPath: $.Properties.*.propertyDetails.currentOwner

      - jsonPath: $.Properties.*.propertyDetails.floors

      - jsonPath: $.Properties.*.propertyDetails.additionalDetails

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.createdBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.createdTime

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_ownership_audit_v1 (id, property_id, tenantid, allotmen_number, active_state, is_primary_owner, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.owners.*
      jsonMaps:

      - jsonPath: $.Properties.*.owners.*.id

      - jsonPath: $.Properties.*.owners.*.property.id

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.owners.*.allotmenNumber

      - jsonPath: $.Properties.*.owners.*.activeState

      - jsonPath: $.Properties.*.owners.*.isPrimaryOwner

      - jsonPath: $.Properties.*.owners.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedTime
  
  
    - query: INSERT INTO cs_pt_ownershipdetails_audit_v1 (id, property_id, owner_id, tenantid, name, email, phone, gender, date_of_birth, aadhaar_number, allotment_startdate, allotment_enddate, posession_startdate, posession_enddate, monthly_rent, revision_period, revision_percentage, father_or_husband, relation, relation_with_deceased_allottee, date_of_death_allottee, application_number, application_type, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.owners.*.ownerDetails
      jsonMaps:

      - jsonPath: $.Properties.*.owners.*.ownerDetails.id

      - jsonPath: $.Properties.*.owners.*.property.id

      - jsonPath: $.Properties.*.owners.*.id

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.owners.*.ownerDetails.name

      - jsonPath: $.Properties.*.owners.*.ownerDetails.email

      - jsonPath: $.Properties.*.owners.*.ownerDetails.phone

      - jsonPath: $.Properties.*.owners.*.ownerDetails.gender

      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Properties.*.owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Properties.*.owners.*.ownerDetails.relation
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfDeathAllottee

      - jsonPath: $.Properties.*.owners.*.ownerDetails.applicationNumber
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.applicationType

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.createdBy

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.createdTime

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedTime
    

    
    
  - version: 1.0
    description: Persists Properties details in cs_pt_property_v1 table
    fromTopic: update-property-csp
    isTransaction: true
    queryMaps:

    - query: UPDATE cs_pt_property_v1 SET tenantid=?, colony=?, master_data_state=?, master_data_action=?, modified_by=?, modified_date=? where id=? AND transit_number=?;
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.masterDataState

      - jsonPath: $.Properties.*.masterDataAction 
      
      - jsonPath: $.Properties.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.auditDetails.lastModifiedTime
      
      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber


    - query: UPDATE cs_pt_propertydetails_v1 SET tenantid=?, area=?, rent_per_sqyd=?, current_owner=?, floors=?, additional_details=?, modified_by=?, modified_date=? where id=? AND property_id=? AND transit_number=?;
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.area

      - jsonPath: $.Properties.*.propertyDetails.rentPerSqyd

      - jsonPath: $.Properties.*.propertyDetails.currentOwner

      - jsonPath: $.Properties.*.propertyDetails.floors

      - jsonPath: $.Properties.*.propertyDetails.additionalDetails

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedTime
      
      - jsonPath: $.Properties.*.propertyDetails.id

      - jsonPath: $.Properties.*.propertyDetails.propertyId

      - jsonPath: $.Properties.*.propertyDetails.transitNumber


    - query: UPDATE cs_pt_ownership_v1 SET tenantid=?, allotmen_number=?, active_state=?, is_primary_owner=?, modified_by=?, modified_date=? where id=?;
      basePath: $.Properties.*.owners.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId
      
      - jsonPath: $.Properties.*.owners.*.allotmenNumber

      - jsonPath: $.Properties.*.owners.*.activeState

      - jsonPath: $.Properties.*.owners.*.isPrimaryOwner

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.auditDetails.lastModifiedTime
            
      - jsonPath: $.Properties.*.owners.*.id

 
    - query: UPDATE cs_pt_ownershipdetails_v1 SET owner_id=?, tenantid=?, name=?, email=?, phone=?, gender=?, date_of_birth=?, aadhaar_number=?, allotment_startdate=?, allotment_enddate=?, posession_startdate=?, posession_enddate=?, monthly_rent=?, revision_period=?, revision_percentage=?, father_or_husband=?, relation=?, relation_with_deceased_allottee=?, date_of_death_allottee=?, permanent=?, application_type=?, modified_by=?, modified_date=? where id=?;
      basePath: $.Properties.*.owners.*
      jsonMaps:

      - jsonPath: $.Properties.*.owners.*.id
      
      - jsonPath: $.Properties.*.tenantId
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.name

      - jsonPath: $.Properties.*.owners.*.ownerDetails.email

      - jsonPath: $.Properties.*.owners.*.ownerDetails.phone
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.gender

      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Properties.*.owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Properties.*.owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Properties.*.owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Properties.*.owners.*.ownerDetails.relation
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.dateOfDeathAllottee

      - jsonPath: $.Properties.*.owners.*.ownerDetails.permanent
      
      - jsonPath: $.Properties.*.owners.*.ownerDetails.applicationType

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.owners.*.ownerDetails.auditDetails.lastModifiedTime
            
      - jsonPath: $.Properties.*.owners.*.ownerDetails.id
      
      
    - query: INSERT INTO cs_pt_documents_v1 (id, reference_id, tenantid, is_active, document_type, fileStore_id, property_id, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET is_active = ?, document_type =?, fileStore_id =?,modified_by =?, modified_date =?;
      basePath: $.Properties.*.propertyDetails.applicationDocuments.*
      jsonMaps:

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.id

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.referenceId

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.active

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.documentType

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.fileStoreId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.propertyId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.createdBy

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.createdTime

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedTime   
      
      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.active

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.documentType

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.fileStoreId

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.applicationDocuments.*.auditDetails.lastModifiedTime      
    
    
    - query : DELETE FROM cs_pt_demand WHERE property_id=? and tenantid=?;
      basePath: $.Properties.*.demands.*
      jsonMaps:
       - jsonPath: $.Properties.*.demands.*.propertyId
       
       - jsonPath: $.Properties.*.demands.*.tenantId

    - query : INSERT INTO cs_pt_demand(id, property_id, initialGracePeriod, generationDate, collectionPrincipal, remainingPrincipal, interestSince,mode,tenantid,created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.demands.*
      jsonMaps:
        - jsonPath: $.Properties.*.demands.*.id 
      
        - jsonPath: $.Properties.*.demands.*.propertyId

        - jsonPath: $.Properties.*.demands.*.initialGracePeriod
       
        - jsonPath: $.Properties.*.demands.*.generationDate
  
        - jsonPath: $.Properties.*.demands.*.collectionPrincipal

        - jsonPath: $.Properties.*.demands.*.remainingPrincipal
        
        - jsonPath: $.Properties.*.demands.*.interestSince 
      
        - jsonPath: $.Properties.*.demands.*.mode

        - jsonPath: $.Properties.*.demands.*.tenantId
       
        - jsonPath: $.Properties.*.demands.*.auditDetails.createdBy
  
        - jsonPath: $.Properties.*.demands.*.auditDetails.lastModifiedBy

        - jsonPath: $.Properties.*.demands.*.auditDetails.createdTime
        
        - jsonPath: $.Properties.*.demands.*.auditDetails.lastModifiedTime
        
       
    - query : DELETE FROM cs_pt_payment WHERE property_id=? and tenantid=?;
      basePath: $.Properties.*.payments.*
      jsonMaps:
       - jsonPath: $.Properties.*.payments.*.propertyId
       
       - jsonPath: $.Properties.*.payments.*.tenantId

    
    - query : INSERT INTO cs_pt_payment(id, property_id, receiptNo, amountPaid, dateOfPayment,mode,tenantid,created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.payments.*
      jsonMaps:
        - jsonPath: $.Properties.*.payments.*.id 
      
        - jsonPath: $.Properties.*.payments.*.propertyId

        - jsonPath: $.Properties.*.payments.*.receiptNo
       
        - jsonPath: $.Properties.*.payments.*.amountPaid
  
        - jsonPath: $.Properties.*.payments.*.dateOfPayment

        - jsonPath: $.Properties.*.payments.*.mode

        - jsonPath: $.Properties.*.payments.*.tenantId
       
        - jsonPath: $.Properties.*.payments.*.auditDetails.createdBy
  
        - jsonPath: $.Properties.*.payments.*.auditDetails.lastModifiedBy

        - jsonPath: $.Properties.*.payments.*.auditDetails.createdTime
        
        - jsonPath: $.Properties.*.payments.*.auditDetails.lastModifiedTime
        
        
    - query : DELETE FROM cs_pt_collection WHERE demand_id=? and payment_id=? and tenantid=?;
      basePath: $.Properties.*.rentCollections.*
      jsonMaps:
       - jsonPath: $.Properties.*.rentCollections.*.demandId
       
       - jsonPath: $.Properties.*.rentCollections.*.paymentId
       
       - jsonPath: $.Properties.*.rentCollections.*.tenantId

    
    - query : INSERT INTO cs_pt_collection(id, demandId, paymentId, interestCollected, principalCollected,tenantid,created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.rentCollections.*
      jsonMaps:
        - jsonPath: $.Properties.*.rentCollections.*.id 
      
        - jsonPath: $.Properties.*.rentCollections.*.demandId

        - jsonPath: $.Properties.*.rentCollections.*.paymentId
       
        - jsonPath: $.Properties.*.rentCollections.*.interestCollected
  
        - jsonPath: $.Properties.*.rentCollections.*.principalCollected

        - jsonPath: $.Properties.*.rentCollections.*.tenantId
       
        - jsonPath: $.Properties.*.rentCollections.*.auditDetails.createdBy
  
        - jsonPath: $.Properties.*.rentCollections.*.auditDetails.lastModifiedBy

        - jsonPath: $.Properties.*.rentCollections.*.auditDetails.createdTime
        
        - jsonPath: $.Properties.*.rentCollections.*.auditDetails.lastModifiedTime
        
        
    - query : DELETE FROM cs_pt_account WHERE property_id=? and tenantid=?;
      basePath: $.Properties.*.rentAccount.*
      jsonMaps:
       - jsonPath: $.Properties.*.rentAccount.*.propertyId
       
       - jsonPath: $.Properties.*.rentAccount.*.tenantId

    
    - query : INSERT INTO cs_pt_account(id, property_id, remainingAmount,tenantid,created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.rentAccount.*
      jsonMaps:
        - jsonPath: $.Properties.*.rentAccount.*.id 
      
        - jsonPath: $.Properties.*.rentAccount.*.propertyId

        - jsonPath: $.Properties.*.rentAccount.*.remainingAmount
       
        - jsonPath: $.Properties.*.rentAccount.*.tenantId
  
        - jsonPath: $.Properties.*.rentAccount.*.auditDetails.createdBy
  
        - jsonPath: $.Properties.*.rentAccount.*.auditDetails.lastModifiedBy

        - jsonPath: $.Properties.*.rentAccount.*.auditDetails.createdTime
        
        - jsonPath: $.Properties.*.rentAccount.*.auditDetails.lastModifiedTime
    
    
  - version: 1.0
    description: Persists Owners details in cs_pt_ownership_v1 table
    fromTopic: save-ownership-transfer
    isTransaction: true
    queryMaps:

    - query: INSERT INTO cs_pt_ownership_v1 (id, property_id, tenantid, allotmen_number, application_state, application_action, active_state, is_primary_owner, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Owners.*
      jsonMaps:

      - jsonPath: $.Owners.*.id

      - jsonPath: $.Owners.*.property.id
      
      - jsonPath: $.Owners.*.tenantId
      
      - jsonPath: $.Owners.*.allotmenNumber

      - jsonPath: $.Owners.*.applicationState
      
      - jsonPath: $.Owners.*.applicationAction

      - jsonPath: $.Owners.*.activeState

      - jsonPath: $.Owners.*.isPrimaryOwner

      - jsonPath: $.Owners.*.auditDetails.createdBy

      - jsonPath: $.Owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.auditDetails.createdTime

      - jsonPath: $.Owners.*.auditDetails.lastModifiedTime
  
  
    - query: INSERT INTO cs_pt_ownershipdetails_v1 (id, property_id, owner_id, tenantid, name, email, phone, gender, date_of_birth, aadhaar_number, allotment_startdate, allotment_enddate, posession_startdate, posession_enddate, monthly_rent, revision_period, revision_percentage, father_or_husband, relation, relation_with_deceased_allottee, date_of_death_allottee, application_number, application_type, permanent, created_by, modified_by, created_date, modified_date, due_amount, apro_charge) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Owners.*.ownerDetails
      jsonMaps:

      - jsonPath: $.Owners.*.ownerDetails.id

      - jsonPath: $.Owners.*.property.id

      - jsonPath: $.Owners.*.id
      
      - jsonPath: $.Owners.*.tenantId
      
      - jsonPath: $.Owners.*.ownerDetails.name

      - jsonPath: $.Owners.*.ownerDetails.email

      - jsonPath: $.Owners.*.ownerDetails.phone
      
      - jsonPath: $.Owners.*.ownerDetails.gender

      - jsonPath: $.Owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Owners.*.ownerDetails.relation

      - jsonPath: $.Owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Owners.*.ownerDetails.dateOfDeathAllottee

      - jsonPath: $.Owners.*.ownerDetails.applicationNumber
      
      - jsonPath: $.Owners.*.ownerDetails.applicationType
      
      - jsonPath: $.Owners.*.ownerDetails.permanent

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.createdBy

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.createdTime

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedTime
      
      - jsonPath: $.Owners.*.ownerDetails.dueAmount

      - jsonPath: $.Owners.*.ownerDetails.aproCharge      
      
      
    - query: INSERT INTO cs_pt_ownership_audit_v1 (id, property_id, tenantid, allotmen_number, application_state, application_action, active_state, is_primary_owner, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Owners.*
      jsonMaps:

      - jsonPath: $.Owners.*.id

      - jsonPath: $.Owners.*.property.id
      
      - jsonPath: $.Owners.*.tenantId
      
      - jsonPath: $.Owners.*.allotmenNumber

      - jsonPath: $.Owners.*.applicationState
      
      - jsonPath: $.Owners.*.applicationAction

      - jsonPath: $.Owners.*.activeState

      - jsonPath: $.Owners.*.isPrimaryOwner

      - jsonPath: $.Owners.*.auditDetails.createdBy

      - jsonPath: $.Owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.auditDetails.createdTime

      - jsonPath: $.Owners.*.auditDetails.lastModifiedTime
  
  
    - query: INSERT INTO cs_pt_ownershipdetails_audit_v1 (id, property_id, owner_id, tenantid, name, email, phone, gender, date_of_birth, aadhaar_number, allotment_startdate, allotment_enddate, posession_startdate, posession_enddate, monthly_rent, revision_period, revision_percentage, father_or_husband, relation, relation_with_deceased_allottee, date_of_death_allottee, application_number, application_type, permanent, created_by, modified_by, created_date, modified_date, due_amount, apro_charge) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Owners.*.ownerDetails
      jsonMaps:

      - jsonPath: $.Owners.*.ownerDetails.id

      - jsonPath: $.Owners.*.property.id

      - jsonPath: $.Owners.*.id
      
      - jsonPath: $.Owners.*.tenantId
      
      - jsonPath: $.Owners.*.ownerDetails.name

      - jsonPath: $.Owners.*.ownerDetails.email

      - jsonPath: $.Owners.*.ownerDetails.phone
      
      - jsonPath: $.Owners.*.ownerDetails.gender

      - jsonPath: $.Owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Owners.*.ownerDetails.relation

      - jsonPath: $.Owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Owners.*.ownerDetails.dateOfDeathAllottee

      - jsonPath: $.Owners.*.ownerDetails.applicationNumber
      
      - jsonPath: $.Owners.*.ownerDetails.applicationType
      
      - jsonPath: $.Owners.*.ownerDetails.permanent

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.createdBy

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.createdTime

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedTime

      - jsonPath: $.Owners.*.ownerDetails.dueAmount

      - jsonPath: $.Owners.*.ownerDetails.aproCharge 
            
         
      
  - version: 1.0
    description: Persists Owners details in cs_pt_ownership_v1 table
    fromTopic: update-rp-ownership-transfer
    isTransaction: true
    queryMaps:
    
    - query: INSERT INTO cs_pt_ownership_audit_v1 SELECT * FROM cs_pt_ownership_v1 WHERE id = ?;
      basePath: Owners.*
      jsonMaps:
      - jsonPath: $.Owners.*.id

    - query: UPDATE cs_pt_ownership_v1 SET  allotmen_number=?, active_state=?, is_primary_owner=?, application_state=?, application_action=?, modified_by=?, modified_date=? WHERE id=?;
      basePath: Owners.*
      jsonMaps:

      - jsonPath: $.Owners.*.allotmenNumber

      - jsonPath: $.Owners.*.activeState

      - jsonPath: $.Owners.*.isPrimaryOwner
      
      - jsonPath: $.Owners.*.applicationState
      
      - jsonPath: $.Owners.*.applicationAction

      - jsonPath: $.Owners.*.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.auditDetails.lastModifiedTime 
      
      - jsonPath: $.Owners.*.id
    
        
    - query: INSERT INTO cs_pt_ownershipdetails_audit_v1 SELECT * FROM cs_pt_ownershipdetails_v1 WHERE id = ?;
      basePath: Owners.*.ownerDetails
      jsonMaps:
      - jsonPath: $.Owners.*.ownerDetails.id
    
    
    - query: UPDATE cs_pt_ownershipdetails_v1 SET name=?, email=?, phone=?, gender=?, date_of_birth=?, aadhaar_number=?, allotment_startdate=?, allotment_enddate=?, posession_startdate=?, posession_enddate=?, monthly_rent=?, revision_period=?, revision_percentage=?, father_or_husband=?, relation=?, relation_with_deceased_allottee=?, date_of_death_allottee=?, application_type=?, modified_by=?, modified_date=?, due_amount=?, apro_charge=?, permanent=? where id=?;
      basePath: $.Owners.*.ownerDetails
      jsonMaps:
            
      - jsonPath: $.Owners.*.ownerDetails.name

      - jsonPath: $.Owners.*.ownerDetails.email

      - jsonPath: $.Owners.*.ownerDetails.phone
      
      - jsonPath: $.Owners.*.ownerDetails.gender

      - jsonPath: $.Owners.*.ownerDetails.dateOfBirth

      - jsonPath: $.Owners.*.ownerDetails.aadhaarNumber

      - jsonPath: $.Owners.*.ownerDetails.allotmentStartdate

      - jsonPath: $.Owners.*.ownerDetails.allotmentEnddate

      - jsonPath: $.Owners.*.ownerDetails.posessionStartdate

      - jsonPath: $.Owners.*.ownerDetails.posessionEnddate

      - jsonPath: $.Owners.*.ownerDetails.monthlyRent

      - jsonPath: $.Owners.*.ownerDetails.revisionPeriod

      - jsonPath: $.Owners.*.ownerDetails.revisionPercentage
      
      - jsonPath: $.Owners.*.ownerDetails.fatherOrHusband

      - jsonPath: $.Owners.*.ownerDetails.relation
      
      - jsonPath: $.Owners.*.ownerDetails.relationWithDeceasedAllottee
      
      - jsonPath: $.Owners.*.ownerDetails.dateOfDeathAllottee
      
      - jsonPath: $.Owners.*.ownerDetails.applicationType

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.ownerDetails.auditDetails.lastModifiedTime
      
      - jsonPath: $.Owners.*.ownerDetails.dueAmount

      - jsonPath: $.Owners.*.ownerDetails.aproCharge
      
      - jsonPath: $.Owners.*.ownerDetails.permanent
            
      - jsonPath: $.Owners.*.ownerDetails.id     
      
      
    - query: INSERT INTO cs_pt_documents_v1 (id, reference_id, tenantid, is_active, document_type, fileStore_id, property_id, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET is_active = ?, document_type =?, fileStore_id =?, modified_by =?, modified_date =?;
      basePath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*
      jsonMaps:

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.id

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.referenceId

      - jsonPath: $.Owners.*.tenantId

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.active

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.documentType

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.fileStoreId

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.propertyId

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.createdBy

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.createdTime

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.lastModifiedTime   
      
      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.active

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.documentType

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.fileStoreId

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.lastModifiedBy

      - jsonPath: $.Owners.*.ownerDetails.ownershipTransferDocuments.*.auditDetails.lastModifiedTime  
      
            
      