serviceMaps:
  serviceName: csp
  mappings:
  - version: 1.0
    description: Persists Properties details in cs_pt_property_v1 table
    fromTopic: save-property-create
    isTransaction: true
    queryMaps:

    - query: INSERT INTO cs_pt_property_v1 (id, transit_number, colony, state, action, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transit_number

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.state

      - jsonPath: $.Properties.*.action 
      
      - jsonPath: $.Licenses.*.auditDetails.createdBy

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

      - jsonPath: $.Licenses.*.auditDetails.createdTime

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_propertydetails_v1 (id, property_id, transit_number, area, rent_per_sqyd, current_owner, floors, additional_details, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transit_number

      - jsonPath: $.Properties.*.area

      - jsonPath: $.Properties.*.rent_per_sqyd

      - jsonPath: $.Properties.*.current_owner

      - jsonPath: $.Properties.*.floors

      - jsonPath: $.Properties.*.additional_details

      - jsonPath: $.Licenses.*.auditDetails.createdBy

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

      - jsonPath: $.Licenses.*.auditDetails.createdTime

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime


    - query: INSERT INTO cs_pt_ownership_v1 (id, property_id, owner_id, allotment_startdate, allotment_enddate, posession_startdate, posession_enddate, allotmen_number, application_status, active_state, is_primary_owner, monthly_rent, revision_period, revision_percentage, created_by, modified_by, created_date, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.Properties.*.owner.*
      jsonMaps:

      - jsonPath: $.Properties.*.owner.*.id

      - jsonPath: $.Properties.*.property_id

      - jsonPath: $.Properties.*.owner.*.id

      - jsonPath: $.Properties.*.owner.*.allotment_startdate

      - jsonPath: $.Properties.*.owner.*.allotment_enddate

      - jsonPath: $.Properties.*.owner.*.posession_startdate

      - jsonPath: $.Properties.*.owner.*.posession_enddate
      
      - jsonPath: $.Properties.*.owner.*.allotmen_number

      - jsonPath: $.Properties.*.owner.*.application_status

      - jsonPath: $.Properties.*.owner.*.active_state

      - jsonPath: $.Properties.*.owner.*.is_primary_owner

      - jsonPath: $.Properties.*.owner.*.monthly_rent

      - jsonPath: $.Properties.*.owner.*.revision_period

      - jsonPath: $.Properties.*.owner.*.revision_percentage

      - jsonPath: $.Licenses.*.auditDetails.createdBy

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

      - jsonPath: $.Licenses.*.auditDetails.createdTime

      - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime


#    - query: INSERT INTO cs_pt_address_v1 (id, property_id, transit_number, colony, area, district, state, country, pincode, landmark, created_by, created_date, modified_by, modified_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
#      basePath: $.Properties.*.address.*
#      jsonMaps:
#
#      - jsonPath: $.Properties.*.address.*.id
#
#      - jsonPath: $.Properties.*.property_id
#
#      - jsonPath: $.Properties.*.address.*.transit_number
#
#      - jsonPath: $.Properties.*.address.*.colony
#
#      - jsonPath: $.Properties.*.address.*.area
#
#      - jsonPath: $.Properties.*.address.*.district
#
#      - jsonPath: $.Properties.*.address.*.state
#      
#      - jsonPath: $.Properties.*.address.*.country
#
#      - jsonPath: $.Properties.*.address.*.pincode
#
#      - jsonPath: $.Properties.*.address.*.landmark
#
#      - jsonPath: $.Properties.*.auditDetails.created_by
#
#      - jsonPath: $.Properties.*.auditDetails.created_date
#
#      - jsonPath: $.Properties.*.auditDetails.modified_by
#
#      - jsonPath: $.Properties.*.auditDetails.modified_date

    