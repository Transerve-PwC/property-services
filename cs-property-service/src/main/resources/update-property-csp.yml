serviceMaps:
  serviceName: csp
  mappings:
  - version: 1.0
    description: Persists Properties details in cs_pt_property_v1 table
    fromTopic: update-property-csp
    isTransaction: true
    queryMaps:

    - query: UPDATE cs_pt_property_v1 SET tenantid=?, colony=?, master_data_state=?, master_data_action=?, modified_by=?, modified_date=? where id=? AND transit_number=?;
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.colony

      - jsonPath: $.Properties.*.masterDataState

      - jsonPath: $.Properties.*.masterDataAction 
      
      - jsonPath: $.Properties.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.auditDetails.lastModifiedTime
      
      - jsonPath: $.Properties.*.id

      - jsonPath: $.Properties.*.transitNumber


    - query: UPDATE cs_pt_propertydetails_v1 SET tenantid=?, area=?, rent_per_sqyd=?, current_owner=?, floors=?, additional_details=?, modified_by=?, modified_date=? where id=? AND property_id=? AND transit_number=?;
      basePath: Properties.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.propertyDetails.area

      - jsonPath: $.Properties.*.propertyDetails.rentPerSqyd

      - jsonPath: $.Properties.*.propertyDetails.currentOwner

      - jsonPath: $.Properties.*.propertyDetails.floors

      - jsonPath: $.Properties.*.propertyDetails.additionalDetails

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.propertyDetails.auditDetails.lastModifiedTime
      
      - jsonPath: $.Properties.*.propertyDetails.id

      - jsonPath: $.Properties.*.propertyDetails.propertyId

      - jsonPath: $.Properties.*.propertyDetails.transitNumber


    - query: UPDATE cs_pt_ownership_v1 SET tenantid=?, owner_id=?, name=?, email=?, phone=?, gender=?, date_of_birth=?, aadhaar_number=?, allotment_startdate=?, allotment_enddate=?, posession_startdate=?, posession_enddate=?, allotmen_number=?, application_status=?, active_state=?, is_primary_owner=?, monthly_rent=?, revision_period=?, revision_percentage=?, modified_by=?, modified_date=? where id=? AND property_id=?;
      basePath: $.Properties.*.owners.*
      jsonMaps:

      - jsonPath: $.Properties.*.tenantId

      - jsonPath: $.Properties.*.owners.*.ownerId
      
      - jsonPath: $.Properties.*.owners.*.name

      - jsonPath: $.Properties.*.owners.*.email

      - jsonPath: $.Properties.*.owners.*.phone
      
      - jsonPath: $.Properties.*.owners.*.gender

      - jsonPath: $.Properties.*.owners.*.dateOfBirth

      - jsonPath: $.Properties.*.owners.*.aadhaarNumber

      - jsonPath: $.Properties.*.owners.*.allotmentStartdate

      - jsonPath: $.Properties.*.owners.*.allotmentEnddate

      - jsonPath: $.Properties.*.owners.*.posessionStartdate

      - jsonPath: $.Properties.*.owners.*.posessionEnddate
      
      - jsonPath: $.Properties.*.owners.*.allotmenNumber

      - jsonPath: $.Properties.*.owners.*.applicationStatus

      - jsonPath: $.Properties.*.owners.*.activeState

      - jsonPath: $.Properties.*.owners.*.isPrimaryOwner

      - jsonPath: $.Properties.*.owners.*.monthlyRent

      - jsonPath: $.Properties.*.owners.*.revisionPeriod

      - jsonPath: $.Properties.*.owners.*.revisionPercentage

      - jsonPath: $.Properties.*.auditDetails.lastModifiedBy

      - jsonPath: $.Properties.*.auditDetails.lastModifiedTime
            
      - jsonPath: $.Properties.*.owners.*.id

      - jsonPath: $.Properties.*.owners.*.propertyId

    